# 데이터베이스 검증 가이드

## 🔍 문제 해결 완료

### 수정 사항
1. **재고관리 업로더**: Supabase 저장 완료 후 최신 데이터 재로드
2. **영업현황 Revenue**: Supabase 저장 완료 후 최신 데이터 재로드
3. **구매현황 업로더**: Supabase 저장 완료 후 최신 데이터 재로드

### 핵심 변경
- 업로드 후 **Supabase 저장 완료를 기다림** (async/await)
- 저장 완료 후 **Supabase에서 최신 데이터를 다시 로드**
- 모든 사용자가 **동일한 Supabase 데이터**를 보도록 보장

## 📊 데이터베이스 확인 쿼리

**SQL 쿼리 파일**: `supabase/verification_queries.sql`

Supabase SQL Editor에서 위 파일을 열어서 실행하거나, 아래 쿼리를 개별적으로 실행할 수 있습니다.

### 1. 재고 데이터 확인
- 재고 데이터 개수 확인
- 최근 업데이트된 재고 데이터 확인

### 2. Revenue 데이터 확인
- 연도별 Revenue 데이터 개수
- 최근 업데이트된 Revenue 데이터 확인

### 3. 구매 데이터 확인
- 카테고리별 구매 데이터 개수
- 최근 업데이트된 구매 데이터 확인

### 4. 전체 데이터 일관성 확인
- 모든 테이블의 데이터 개수 및 최근 업데이트 시간

## 🧪 테스트 절차

### 1. 재고관리 테스트
1. **로컬에서 파일 업로드**
2. **콘솔 확인**:
   ```
   ✅ warehouse 재고 Supabase 동기화 완료
   ✅ Supabase에서 최신 재고 데이터 재로드 완료
   ```
3. **다른 컴퓨터에서 확인**:
   - 페이지 로드 시 Supabase에서 데이터 로드
   - 동일한 데이터가 표시되는지 확인

### 2. 영업현황 Revenue 테스트
1. **2023년 데이터 업로드**
2. **콘솔 확인**:
   ```
   ✅ 2023년 데이터 저장 완료: X개 항목
   ✅ Supabase 동기화 완료: 2023년
   ✅ Supabase에서 최신 매출 데이터 재로드 완료: X개
   ```
3. **2024년 데이터 업로드**
4. **다른 컴퓨터에서 확인**:
   - 2023년, 2024년 데이터가 모두 표시되는지 확인
   - 데이터가 동일한지 확인

### 3. 구매현황 테스트
1. **Parts 파일 업로드**
2. **콘솔 확인**:
   ```
   ✅ 부품 데이터 Supabase 동기화 완료
   ✅ Supabase에서 최신 구매 데이터 재로드 완료: X개
   ```
3. **다른 컴퓨터에서 확인**:
   - 동일한 데이터가 표시되는지 확인

## ⚠️ 문제 발생 시 확인 사항

### 문제: 여전히 데이터가 다름
1. **브라우저 캐시 삭제**: Ctrl+Shift+Delete
2. **하드 리프레시**: Ctrl+Shift+R (또는 Cmd+Shift+R)
3. **localStorage 확인**: 개발자 도구 > Application > Local Storage
4. **Supabase 데이터 확인**: 위의 SQL 쿼리 실행
5. **콘솔 에러 확인**: 개발자 도구 > Console

### 문제: Supabase 저장 실패
1. **네트워크 확인**: 인터넷 연결 확인
2. **Supabase 연결 확인**: 환경 변수 확인
3. **콘솔 에러 확인**: 구체적인 에러 메시지 확인
4. **RLS 확인**: Row Level Security 비활성화 확인

## ✅ 성공 기준

- ✅ 파일 업로드 후 Supabase 저장 완료 메시지 표시
- ✅ Supabase에서 최신 데이터 재로드 완료 메시지 표시
- ✅ 다른 컴퓨터에서 동일한 데이터 표시
- ✅ Supabase Table Editor에서 데이터 확인 가능
- ✅ 콘솔에 에러 없음
